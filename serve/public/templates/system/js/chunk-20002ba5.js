(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-20002ba5"],{5791:function(t,e,a){},5960:function(t,e,a){"use strict";var n=a("fcc0"),i=a.n(n);i.a},cb0e:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"list-header"},[a("div",{staticClass:"list-header-item"},[a("div",[t._v("状态")]),a("div",[a("el-radio-group",{attrs:{size:"small"},on:{change:t.changeStatus},model:{value:t.query.status,callback:function(e){t.$set(t.query,"status",e)},expression:"query.status"}},[a("span",{staticStyle:{"margin-right":"5px"}},[a("el-radio-button",{attrs:{label:""}},[t._v("全部")])],1),a("span",{staticStyle:{"margin-right":"5px"}},[a("el-radio-button",{attrs:{label:"pending"}},[t._v("冻结中")])],1),a("span",{staticStyle:{"margin-right":"5px"}},[a("el-radio-button",{attrs:{label:"success"}},[t._v("已结算")])],1)])],1)]),a("div",{staticClass:"list-header-item"},[a("div",[t._v("搜索")]),a("div",[a("el-input",{attrs:{size:"small"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.toSearch(e)}},model:{value:t.search_value,callback:function(e){t.search_value=e},expression:"search_value"}},[a("el-select",{staticClass:"search-prepend",attrs:{slot:"prepend"},slot:"prepend",model:{value:t.search_type,callback:function(e){t.search_type=e},expression:"search_type"}},[a("el-option",{attrs:{label:"单据号",value:"no"}}),a("el-option",{attrs:{label:"用户手机号",value:"mobile"}}),a("el-option",{attrs:{label:"用户钱包号",value:"wallet_id"}})],1),a("div",{staticStyle:{cursor:"pointer"},attrs:{slot:"append"},on:{click:t.toSearch},slot:"append"},[t._v("搜索")])],1)],1)]),a("div",{staticStyle:{"text-align":"center",margin:"20px 0 10px"}},[a("el-button",{attrs:{size:"mini"},on:{click:t.toReset}},[t._v("重置")])],1)]),a("div",{staticClass:"list-content"},[t._m(0),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{data:t.Data,border:"","header-cell-class-name":"list-table-header"}},[a("el-table-column",{attrs:{label:"单据号"},scopedSlots:t._u([{key:"default",fn:function(e){return a("div",{},[a("div",[t._v(t._s(e.row.no))]),a("div",{staticClass:"content-item"},[a("div",[t._v("包含订单数：")]),a("div",[t._v(t._s(e.row.order_count))])])])}}])}),a("el-table-column",{attrs:{label:"时间"},scopedSlots:t._u([{key:"default",fn:function(e){return a("div",{},[a("div",{staticClass:"content-item"},[a("div",[t._v("生成时间：")]),a("div",[t._v(t._s(e.row.created_at))])]),a("div",{staticClass:"content-item"},[a("div",[t._v(t._s("pending"===e.row.status?"预计":"")+"结算时间：")]),a("div",[t._v(t._s(e.row.unlocked_at?e.row.unlocked_at:"/"))])]),"pending"===e.row.status?a("div",{staticClass:"content-item"},[a("div",[t._v("结算剩余时间：")]),e.row.unlocked_in>0?a("div",[t._v(t._s(e.row.unlocked_in)+"天")]):t._e(),0===e.row.unlocked_in?a("div",{staticClass:"exceed-tip"},[t._v("已到结算时间，请及时结算")]):t._e(),e.row.unlocked_in<0?a("div",{staticClass:"exceed-tip"},[t._v("已超过结算时间"+t._s(-e.row.unlocked_in)+"天，请及时结算")]):t._e()]):t._e()])}}])}),a("el-table-column",{attrs:{label:"结算用户",width:"120px"},scopedSlots:t._u([{key:"default",fn:function(e){return a("div",{},[a("div",[t._v(t._s(e.row.mobile))])])}}])}),a("el-table-column",{attrs:{label:"金额"},scopedSlots:t._u([{key:"default",fn:function(e){return a("div",{},[a("div",{staticClass:"content-item"},[a("div",[t._v("结算总金额：")]),a("div",[t._v("¥ "+t._s(e.row.amount))])]),a("div",{staticClass:"content-item"},[a("div",[t._v("代收费：")]),a("div",[t._v("¥ "+t._s(e.row.fee))])])])}}])}),a("el-table-column",{attrs:{label:"状态",width:"75px"},scopedSlots:t._u([{key:"default",fn:function(e){return a("div",{},[a("div",{staticClass:"content-status",class:"pending"===e.row.status?"is-pend":"is-success"},[t._v(t._s(e.row.status_value))])])}}])}),a("el-table-column",{attrs:{label:"操作",width:"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return a("div",{},[a("div",[a("el-button",{attrs:{disabled:"pending"!==e.row.status,size:"mini",type:"primary"},on:{click:function(a){return t.toConfirm(e.row)}}},[t._v("确认结算")])],1)])}}])})],1),a("el-pagination",{staticStyle:{"text-align":"center",margin:"30px 0"},attrs:{"current-page":t.query.page,"page-size":t.query.pageSize,total:t.total,layout:"total, prev, pager, next, jumper"},on:{"current-change":t.handleCurrentChange}})],1)])},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"list-tip"},[a("div",[t._v("提示：")]),a("div",[t._v("所有单据必须手动确认结算，即使超过结算截止日期，单据也不会自动结算。请及时结算。")])])}],s=a("f52a"),l={data:function(){return{search_type:"no",search_value:"",query:{page:1,pageSize:15,status:"",wallet_id:"",mobile:"",no:""},Data:[],loading:!1,total:0,clear_info:{days:"3",automatic:!1}}},created:function(){this.getData()},methods:{getData:function(){var t=this;this.loading=!0,Object(s["a"])(this.query).then((function(e){t.Data=e.data.body.data,t.total=e.data.body.page.total,t.loading=!1})).catch((function(){t.loading=!1}))},handleCurrentChange:function(t){this.query.page=t,this.getData()},toSearch:function(){this.query[this.search_type]=this.search_value,this.query.page=1,this.query.status="",this.getData()},changeStatus:function(){this.query.page=1,this.query.wallet_id="",this.query.mobiel="",this.query.no="",this.getData()},toConfirm:function(t){var e=this;this.$confirm("确认结算后，该结算金额将会计入顾客钱包，可供提现，是否确认继续？","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then((function(){var a={status:"success"};Object(s["b"])(t.no,a).then((function(){e.$message.success("状态已更新"),e.getData()}))})).catch((function(){}))},toReset:function(){this.query={page:1,pageSize:15,status:"",wallet_id:"",mobile:"",no:""},this.getData()}}},o=l,r=(a("5960"),a("ef54"),a("2877")),c=Object(r["a"])(o,n,i,!1,null,"ea0e3328",null);e["default"]=c.exports},ef54:function(t,e,a){"use strict";var n=a("5791"),i=a.n(n);i.a},f52a:function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return s}));var n=a("b775");function i(t){return Object(n["a"])({url:"/clear",method:"get",params:t})}function s(t,e){return Object(n["a"])({url:"/clear/"+t,method:"put",data:e})}},fcc0:function(t,e,a){}}]);