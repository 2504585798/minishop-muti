(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1fbf914a"],{2572:function(t,e,s){"use strict";var a=s("6c2e"),i=s.n(a);i.a},"6c2e":function(t,e,s){},a144:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"back-content"},[s("div",{staticClass:"user-form"},[s("div",{staticClass:"user-item"},[s("div",[t._v("手机号")]),s("div",[t._v(t._s(t.$store.getters.mobile?t.$store.getters.mobile:"/"))])]),s("div",{staticClass:"user-item"},[s("div",[t._v("注册时间")]),s("div",[t._v(t._s(t.$store.getters.created_at?t.$store.getters.created_at:"/"))])]),s("div",{staticClass:"user-button"},[s("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.editShow=!t.editShow}}},[t._v(t._s(t.editShow?"取消修改":"修改密码"))])],1),s("transition",{attrs:{name:"pass"}},[s("el-form",{directives:[{name:"show",rawName:"v-show",value:t.editShow,expression:"editShow"}],ref:"data",staticClass:"user-edit-form",attrs:{model:t.data,rules:t.rules,"label-width":"70px"}},[s("el-form-item",{attrs:{label:"新密码",prop:"password"}},[s("el-input",{attrs:{type:"password"},model:{value:t.data.password,callback:function(e){t.$set(t.data,"password",e)},expression:"data.password"}})],1),s("div",[s("el-button",{staticStyle:{width:"100%"},attrs:{loading:t.btnLoading,type:"primary",size:"mini"},on:{click:t.confirmEdit}},[t._v("确 定")])],1)],1)],1)],1)])},i=[],r=s("7ded"),o={data:function(){return{loading:!1,editShow:!1,data:{password:""},rules:{password:[{required:!0,message:"请输入新密码",trigger:"blur"},{min:6,message:"密码至少为6位",trigger:"blur"}]},btnLoading:!1}},methods:{confirmEdit:function(){var t=this;this.$refs.data.validate((function(e){e&&t.confirm()}))},confirm:function(){var t=this;this.btnLoading=!0,Object(r["a"])({password:this.data.password,password_confirmation:this.data.password}).then((function(){t.$message.success({message:"已成功修改密码，将自动重新登录",duration:2e3}),t.$store.dispatch("login",{mobile:t.$store.getters.mobile,password:t.data.password}).then((function(){t.$router.go(0),t.btnLoading=!1})).catch((function(e){t.$message.error({message:e.response.data.message,duration:2e3}),t.btnLoading=!1}))})).catch((function(e){t.$message.error({message:e.response.data.message,duration:2e3}),t.btnLoading=!1}))}},watch:{editShow:{immediate:!0,handler:function(){this.editShow||(this.data.password="",void 0!==this.$refs.data&&this.$refs.data.clearValidate())}}}},n=o,d=(s("2572"),s("2877")),c=Object(d["a"])(n,a,i,!1,null,"7ec643dd",null);e["default"]=c.exports}}]);