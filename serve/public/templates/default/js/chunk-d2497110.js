(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d2497110"],{"3e23":function(t,e,i){"use strict";var s=i("506b"),o=i.n(s);o.a},"506b":function(t,e,i){},"7d57":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"login-background"},[i("page-loading",{attrs:{loading:t.loading}}),i("div",{staticClass:"login-form"},[i("shop-image",{staticClass:"login-form-avatar",attrs:{width:80,circled:""}},[i("div",{attrs:{slot:"placeholder"},slot:"placeholder"},[i("shop-icon",{staticStyle:{"background-color":"#fff"},attrs:{name:"iconzhucetouxiang"}})],1),i("div",{attrs:{slot:"error"},slot:"error"},[i("shop-icon",{staticStyle:{"background-color":"#fff"},attrs:{name:"iconzhucetouxiang"}})],1)]),i("shop-input",{ref:"mobile",staticClass:"login-form-input",attrs:{validate:"",rules:t.rules.mobile},model:{value:t.user.mobile,callback:function(e){t.$set(t.user,"mobile",e)},expression:"user.mobile"}},[i("span",{staticClass:"login-prepend",attrs:{slot:"prepend"},slot:"prepend"},[t._v("手机号")])]),i("shop-input",{ref:"verification",staticClass:"login-form-input verify-input",attrs:{validate:"",rules:t.rules.verification_code},model:{value:t.user.verification_code,callback:function(e){t.$set(t.user,"verification_code",e)},expression:"user.verification_code"}},[i("span",{staticClass:"login-prepend",attrs:{slot:"prepend"},slot:"prepend"},[t._v("验证码")]),i("span",{attrs:{slot:"append"},on:{click:t.getVerify},slot:"append"},[t._v(t._s(t.code_tip))])]),i("shop-input",{ref:"password",staticClass:"login-form-input",attrs:{type:t.passType,validate:"",rules:t.rules.password},model:{value:t.user.password,callback:function(e){t.$set(t.user,"password",e)},expression:"user.password"}},[i("span",{staticClass:"login-prepend",attrs:{slot:"prepend"},slot:"prepend"},[t._v("新密码")]),i("span",{attrs:{slot:"append"},on:{click:function(e){t.passType="text"}},slot:"append"},["password"===t.passType?i("shop-icon",{attrs:{name:"yanjing-bi",size:"mini"}}):t._e()],1),i("span",{attrs:{slot:"append"},on:{click:function(e){t.passType="password"}},slot:"append"},["text"===t.passType?i("shop-icon",{attrs:{name:"yanjing",size:"mini"}}):t._e()],1)]),i("shop-button",{staticClass:"login-form-button",on:{click:t.confirmForget}},[t._v("重设密码")]),i("div",{staticClass:"login-form-bottom"},[i("div",[t._v("已有账号？"),i("div",{staticClass:"bottom-btn",on:{click:t.toLogin}},[t._v("登录")])]),i("div",{staticClass:"bottom-btn",on:{click:t.toRegister}},[t._v("注册账号")])])],1)],1)},o=[],a=i("76a0"),n=i("7ded"),r={data:function(){return{passType:"password",user:{mobile:"",verification_code:"",password:""},rules:{email:[{required:!0,message:"请输入邮箱"}],mobile:[{required:!0,message:"请输入手机号"}],verification_code:[{required:!0,message:"请输入验证码"},{len:4,message:"验证码为4位"}],password:[{required:!0,message:"请输入密码"},{min:6,message:"密码至少为6位"}]},loading:!0,code_tip:"获取验证码",codeLoading:!1,time:30,btnLoading:!1}},created:function(){var t=this;setTimeout((function(){t.loading=!1}),1e3)},methods:{changeType:function(t,e){this.$refs[t].clearValidate(),this.regType=e},toLogin:function(){this.$router.push({name:"Login"})},toRegister:function(){this.$router.push({name:"Register"})},getVerify:function(){this.codeLoading||(this.codeLoading=!0,this.$refs.verification.clearValidate(),this.verifyLoading=!0,this.code_tip=this.time+"s后重试",this.timeOut(),Object(n["c"])({mobile:this.user.mobile}).then((function(){Object(a["Toast"])("验证码已发送至手机，请及时查收")})))},timeOut:function(){var t=this;if(0===this.time)return this.code_tip="获取验证码",this.time=30,void(this.codeLoading=!1);setTimeout((function(){t.time--,t.code_tip=t.time+"s后重试",t.timeOut()}),1e3)},confirmForget:function(){var t=this;this.btnLoading||this.$refs.mobile.validation((function(e){t.$refs.password.validation((function(i){t.$refs.verification.validation((function(s){e&&i&&s&&(t.btnLoading=!0,t.forget())}))}))}))},forget:function(){var t=this;Object(n["a"])(this.user).then((function(){Object(a["Toast"])({message:"密码已重置，正在跳转登录中...",duration:2e3}),t.$store.dispatch("login",{mobile:t.user.mobile,password:t.user.password}).then((function(){"Login"===t.$route.query.from||void 0===t.$route.query.from?t.$router.push({name:"UserHome"}):t.$router.push({name:t.$route.query.from})})),setTimeout((function(){t.$refs.mobile.clearValidate(),t.$refs.password.clearValidate(),t.$refs.verification.clearValidate(),t.btnLoading=!1}),2e3)})).catch((function(e){Object(a["Toast"])({message:e.response.data.message,duration:2e3}),t.btnLoading=!1}))}}},c=r,l=(i("ff44"),i("3e23"),i("2877")),d=Object(l["a"])(c,s,o,!1,null,"4a5a6bc8",null);e["default"]=d.exports},"8c57":function(t,e,i){},ff44:function(t,e,i){"use strict";var s=i("8c57"),o=i.n(s);o.a}}]);