(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5c6ebd69"],{"1a21":function(t,e,s){},b343:function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("page-loading",{attrs:{loading:t.loading}}),s("div",{staticClass:"checksuc-header"},[t._v(" 订单提交成功 ")]),s("div",{staticClass:"checksuc-amount"},[s("div",[t._v("应付金额")]),s("div",[t._v("¥ "),s("strong",[t._v(t._s(t.order.total_amount?t.order.total_amount:"-"))])])]),s("div",{staticClass:"checksuc-payment"},[s("div",[t._v("支付方式")]),s("div",[s("div",{on:{click:t.changePay}},[t._v(t._s("wallet"===t.payment.type?t.payment.name+" 余额：¥ "+t.$store.getters.balance:t.payment.name)),s("span",{staticClass:"checksuc-payment-select"},[t._v(">")])]),s("div",{staticClass:"checksuc-button"},[s("div",[s("shop-button",{attrs:{size:"small",type:"border"},on:{click:t.toOrders}},[t._v("稍后支付")])],1),s("div",[s("shop-button",{attrs:{size:"small",disabled:t.btnLoading},on:{click:t.toPay}},[t._v("立即支付")])],1)])])]),s("div",{staticClass:"checksuc-content"},[s("div",{staticClass:"checksuc-content-header"},[t._v("订单详情")]),s("div",{staticClass:"checksuc-content-content"},[s("div",[t._v("订单号")]),s("div",[t._v(t._s(t.order.order_no))])]),s("div",{staticClass:"checksuc-content-content"},[s("div",[t._v("收件地址")]),s("div",[s("div",[t._v(t._s(t.order.address.name))]),s("div",[t._v(t._s(t.order.address.mobile))]),s("div",[t._v(t._s(t.order.address.address))])])]),t._l(t.order.items,(function(e,n){return s("div",{key:n,staticClass:"checksuc-content-item"},[s("div",[s("shop-image",{attrs:{type:"fit",src:e.src,width:60,rounded:""}},[s("div",{staticClass:"checksuc-image-placeholder",attrs:{slot:"error"},slot:"error"}),s("div",{staticClass:"checksuc-image-placeholder",attrs:{slot:"placeholder"},slot:"placeholder"})])],1),s("div",[s("div",{staticClass:"checksuc-content-item__title"},[t._v(t._s(e.title))]),s("div",{staticClass:"checksuc-content-item__subtitle"},[t._v(t._s(e.variant_title))]),s("div",{staticClass:"checksuc-content-item__price"},[t._v("¥ "),s("strong",[t._v(t._s(e.price))])]),s("div",{staticClass:"checksuc-content-item__amount"},[t._v("x "+t._s(e.quantity))])])])}))],2),s("shop-popup",{attrs:{size:"medium",show:t.payShow},on:{close:t.closePay}},[s("div",{attrs:{slot:"title"},slot:"title"},[t._v("选择支付方式")]),s("div",{attrs:{slot:"content"},slot:"content"},[s("mt-picker",{ref:"pays",attrs:{slots:t.slots}})],1),s("div",{staticClass:"pay-popup-button",attrs:{slot:"button"},slot:"button"},[s("div",[s("shop-button",{attrs:{type:"border",rounded:!1},on:{click:t.closePay}},[t._v("关闭")])],1),s("div",[s("shop-button",{attrs:{rounded:!1},on:{click:t.confirmChange}},[t._v("确定")])],1)])])],1)},a=[],o=(s("d81d"),s("b0c0"),s("d3b7"),s("ddb0"),s("f8b7")),c=s("76a0"),r={data:function(){return{loading:!1,payments:[{name:"钱包支付",type:"wallet"}],payment:{},order:{order_no:"",address:{},items:[],total_amount:0},payShow:!1,slots:[{flex:1,values:[],textAlign:"center"}],btnLoading:!1}},created:function(){this.getOrder(),this.payment=this.payments[0],this.$store.dispatch("getBalance")},methods:{getOrder:function(){var t=this;this.loading=!0,this.order.order_no=this.$route.query.no,Object(o["e"])(this.$route.query.no).then((function(e){t.order.address=e.data.body.address,t.order.items=e.data.body.items,t.order.total_amount=e.data.body.amount,t.loading=!1})).catch((function(){t.loading=!1}))},changePay:function(){var t=this;this.payShow=!0,this.payments.map((function(e){t.slots[0].values.push(e.name)}))},closePay:function(){this.payShow=!1,this.slots[0].values=[]},confirmChange:function(){var t=this,e=this.$refs.pays.values[0];this.payments.map((function(s){s.name===e&&(t.payment=s)})),this.payShow=!1,this.slots[0].values=[]},toOrders:function(){this.$router.push({name:"UserOrder"})},toPay:function(){var t=this;this.btnLoading=!0,Object(o["d"])(this.$route.query.no,this.payment.type).then((function(e){Object(o["g"])(e.data.body.no).then((function(){t.$router.push({name:"Checksuc",query:{no:t.$route.query.no}}),t.btnLoading=!1})).catch((function(e){404===e.response.status&&Object(c["MessageBox"])({title:"提示",message:e.response.data.message,showCancelButton:!0,confirmButtonText:"联系客服充值",cancelButtonText:"稍后支付"}).then((function(e){"cancel"===e?t.$router.push({name:"UserOrder"}):t.btnLoading=!1}))}))}))}}},i=r,d=(s("f9c5"),s("2877")),u=Object(d["a"])(i,n,a,!1,null,"78ee4547",null);e["default"]=u.exports},f8b7:function(t,e,s){"use strict";s.d(e,"a",(function(){return a})),s.d(e,"c",(function(){return o})),s.d(e,"d",(function(){return c})),s.d(e,"g",(function(){return r})),s.d(e,"f",(function(){return i})),s.d(e,"e",(function(){return d})),s.d(e,"b",(function(){return u}));var n=s("b775");function a(t){return Object(n["a"])({url:"order/calc",method:"post",data:t})}function o(t){return Object(n["a"])({url:"order",method:"post",data:t})}function c(t,e){return Object(n["a"])({url:"order/"+t+"/pay/"+e,method:"post"})}function r(t){return Object(n["a"])({url:"pay/"+t+"/wallet",method:"get"})}function i(t){return Object(n["a"])({url:"order",method:"get",params:t})}function d(t){return Object(n["a"])({url:"order/"+t,method:"get"})}function u(t,e){return Object(n["a"])({url:"order/"+t,method:"put",data:e})}},f9c5:function(t,e,s){"use strict";var n=s("1a21"),a=s.n(n);a.a}}]);