(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4a337420"],{"1f16":function(t,e,i){"use strict";var n=i("fc1c"),s=i.n(n);s.a},"413d":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("mt-swipe",{style:{height:(t.height?t.height:t.width)+"px"},attrs:{"show-indicators":t.indicator,auto:t.auto,speed:t.speed,defaultIndex:t.index}},[0===t.images.length?i("mt-swipe-item",[t._t("default"),t.$slots.default?t._e():i("div",{staticClass:"image-carousel-placeholder",style:{height:(t.height?t.height:t.styleWidth)+"px",width:t.styleWidth+"px"}})],2):t._e(),t._l(t.images,(function(e,n){return i("mt-swipe-item",{key:n},[i("shop-image",{attrs:{src:e.img,width:t.styleWidth,height:t.height,type:t.type},on:{click:function(i){return t.toPage(e)}}},[i("div",{staticClass:"image-carousel-placeholder",style:{height:(t.height?t.height:t.styleWidth)+"px",width:t.styleWidth+"px"},attrs:{slot:"error"},slot:"error"})])],1)}))],2)},s=[],a=(i("a9e3"),i("9911"),{props:{images:Array,indicator:{type:Boolean,default:!0},auto:{type:Number,default:0},speed:{type:Number,default:4e3},index:{type:Number,default:0},width:{type:Number,default:0},height:{type:Number,default:300},type:{type:String,default:"cover"}},data:function(){return{styleWidth:0}},methods:{toPage:function(t){void 0!==t.link&&t.link.link&&("Product"===t.link.link?this.$router.push({name:t.link.link,query:{id:t.link.query}}):"Types"===t.link.link?this.$router.push({name:t.link.link,params:{id:t.link.query}}):this.$router.push({name:t.link.link}))}},watch:{width:{immediate:!0,handler:function(){this.width?this.styleWidth=this.width:this.styleWidth=window.innerWidth}}}}),o=a,c=(i("1f16"),i("568d"),i("2877")),r=Object(c["a"])(o,n,s,!1,null,"ba37aa7a",null);e["a"]=r.exports},"4c79":function(t,e,i){"use strict";i.d(e,"b",(function(){return s})),i.d(e,"a",(function(){return a})),i.d(e,"c",(function(){return o}));var n=i("b775");function s(t){return Object(n["a"])({url:"product",method:"get",params:t})}function a(t){return Object(n["a"])({url:"product/"+t,method:"get"})}function o(){return Object(n["a"])({url:"category",method:"get"})}},"568d":function(t,e,i){"use strict";var n=i("d995"),s=i.n(n);s.a},"5e41":function(t,e,i){"use strict";var n=i("c9de"),s=i.n(n);s.a},"7e79":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"product-container"},[i("page-loading",{attrs:{loading:t.loading}}),t.noStock?i("div",{staticClass:"item-soldout",style:{marginTop:(t.width-200)/2+"px"}},[i("div",[t._v("已抢光")])]):t._e(),i("img-carousel",{attrs:{type:"fit",height:t.width,indicator:!1,images:t.item.images}},[i("div",{staticClass:"product-item-placeholder",style:{height:t.width+"px",lineHeight:t.width+"px"}},[i("i",{staticClass:"iconfont icontupian"})])]),i("div",{staticClass:"product-detail"},[i("div",{staticClass:"product-detail-title"},[t._v(t._s(t.item.product.product_title))]),t.item.desc?i("div",{staticClass:"product-detail-desc"},[t._v(t._s(t.item.product.product_desc))]):t._e(),i("div",[t.loading?i("div",{staticClass:"product-detail-price"},[t._m(0)]):t._e(),1===t.item.variants.length?i("div",{staticClass:"product-detail-price"},[i("span",{staticClass:"product-detail-price__price"},[t._v("¥ "),i("strong",[t._v(t._s(void 0!==t.item.variants[0].price?t.item.variants[0].price:"-"))])]),t.item.variants[0].ori_price?i("span",{staticClass:"product-detail-price__oriprice"},[t._v("¥ "+t._s(t.item.variants[0].ori_price))]):t._e()]):t._e(),t.item.variants.length>1?i("div",{staticClass:"product-detail-price"},[i("span",{staticClass:"product-detail-price__price"},[t._v("¥ "),i("strong",[t._v(t._s(t.item.variants[0].price+"-"+t.item.variants[t.item.variants.length-1].price))])])]):t._e()])]),i("div",{staticClass:"product-content",staticStyle:{"margin-bottom":"0"}},[i("div",{staticClass:"product-content-title"},[t._v("商品详情")]),i("div",{staticClass:"product-content-content"},[t.item.content?i("div",[t._v(t._s(t.item.content))]):t._e()])])],1),i("div",{staticClass:"product-footer"},[i("div",{staticClass:"product-footer-icon",on:{click:function(e){return t.$router.push({name:"Home"})}}},[i("div",[i("shop-icon",{staticClass:"product-footer-icon__icon",attrs:{name:"shouye",size:"small"}})],1),i("div",[t._v("首页")])]),i("div",{staticClass:"product-footer-icon",on:{click:function(e){t.shareShow=!0}}},[i("div",[i("shop-icon",{staticClass:"product-footer-icon__icon",attrs:{name:"fenxiang",size:"small"}})],1),i("div",[t._v("分享")])]),i("div",{staticClass:"product-footer-button"},[i("shop-button",{attrs:{type:"border",rounded:!1},on:{click:function(e){return t.toAdd("direct")}}},[t._v("立即购买")])],1),i("div",{staticClass:"product-footer-button"},[i("shop-button",{attrs:{rounded:!1},on:{click:function(e){return t.toAdd("cart")}}},[t._v("加入购物车")])],1)]),i("shop-popup",{attrs:{show:t.shareShow,size:"medium"},on:{close:function(e){t.shareShow=!1}}},[i("div",{attrs:{slot:"title"},slot:"title"},[t._v("分享至")]),i("div",{attrs:{slot:"content"},slot:"content"}),i("div",{attrs:{slot:"button"},slot:"button"},[i("shop-button",{attrs:{rounded:!1},on:{click:function(e){t.shareShow=!1}}},[i("i",{staticClass:"iconfont iconguanbi",staticStyle:{"font-size":"22px"}})])],1)]),i("shop-popup",{attrs:{show:t.variantShow},on:{close:t.closeVariant}},[i("div",{attrs:{slot:"content"},slot:"content"},[i("div",{staticStyle:{"margin-bottom":"20px"}},[i("shop-image",{staticClass:"pop-item-image",attrs:{src:0!==t.item.images.length?t.item.images[0].img:"",width:100,rounded:"",type:"fit"}},[i("div",{staticClass:"product-image-error",attrs:{slot:"error"},slot:"error"},[i("i",{staticClass:"iconfont icontupian"})])]),i("div",{staticClass:"pop-item-title"},[i("div",[t._v(t._s(t.item.product.product_title))]),i("div",{staticClass:"pop-item-title__price"},[t._v("¥ "),i("strong",[t._v(t._s(void 0===t.selectVariant.id?"":t.selectVariant.price))])])])],1),i("div",{staticClass:"pop-item-content"},[i("div",{staticClass:"pop-item-content__title"},[t._v("选择规格")]),i("div",{staticClass:"pop-item-content__content"},t._l(t.item.variants,(function(e,n){return i("div",{key:n},[i("shop-radio",{attrs:{type:"button",bordered:"",rounded:"",size:"medium",label:e.id},on:{change:function(e){return t.changeVariant(n)}},model:{value:t.selectId,callback:function(e){t.selectId=e},expression:"selectId"}},[t._v(" "+t._s(e.variant_title)+" ")])],1)})),0)]),i("div",{staticClass:"pop-item-content pop-item-content-quantity"},[i("div",{staticClass:"pop-item-content__title"},[t._v("选择数量")]),i("div",{staticClass:"pop-item-content__content"},[i("shop-input-num",{attrs:{value:t.selectNum,max:t.selectVariant.limit?t.selectVariant.limit:t.selectVariant.stock,min:1,disabled:!t.selectVariant.stock},on:{change:t.getNum}})],1)])]),i("div",{attrs:{slot:"button"},slot:"button"},[i("shop-button",{attrs:{rounded:!1,loading:t.btnLoading,disabled:!t.selectVariant.stock},on:{click:t.confirmAdd}},[t._v(" 确 定 ")])],1)])],1)},s=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",{staticClass:"product-detail-price__price"},[t._v("¥ "),i("strong",[t._v("-")])])}],a=(i("d81d"),i("b0c0"),i("4c79")),o=i("2166"),c=i("76a0"),r=i("413d"),d={components:{ImgCarousel:r["a"]},data:function(){return{loading:!1,width:0,item:{images:[],product:{},variants:[]},noStock:!1,shareShow:!1,addType:"",variantShow:!1,selectVariant:{},selectId:null,selectNum:1,btnLoading:!1}},mounted:function(){var t=this;this.$nextTick((function(){t.width=window.innerWidth})),window.onresize=function(){t.width=window.innerWidth}},created:function(){this.getDetail()},beforeRouteLeave:function(t,e,i){"Types"===t.name||"Search"===t.name?t.meta.keepAlive=!0:t.meta.keepAlive=!1,i()},methods:{getDetail:function(){var t=this;this.loading=!0,Object(a["a"])(this.$route.params.id).then((function(e){var i=e.data.body;i.variants.sort((function(t,e){e.price,t.price}));var n=0;i.variants.map((function(t){n+=t.stock})),t.noStock=!n,0!==i.images.length&&i.images.map((function(e){t.item.images.push({img:e.url})})),t.item.product=i.product,t.item.variants=i.variants,t.loading=!1})).catch((function(e){404===e.response.status&&(t.loading=!1,Object(c["Toast"])({message:"商品已删除",duration:1e3}),setTimeout((function(){t.$router.go(-1)}),1e3))}))},toAdd:function(t){this.item.variants[0].stock<1?Object(c["Toast"])("库存不足，逛逛别的吧"):(this.addType=t,this.variantShow=!0,this.selectVariant=this.item.variants[0],this.selectId=this.selectVariant.id)},changeVariant:function(t){this.selectVariant=this.item.variants[t],this.selectId=this.selectVariant.id,this.selectNum=1},getNum:function(t){this.selectNum=t},closeVariant:function(){this.variantShow=!1,this.selectNum=0,this.selectVariant={},this.selectId=null},confirmAdd:function(){var t=this,e={variant_id:this.selectVariant.id,quantity:this.selectNum};if("direct"===this.addType){var i={address:{},items:[]};i.items.push(e),Object(o["b"])(i).then((function(e){t.$router.push({name:"Checkout",query:{key:e.data.body.key}})})).catch((function(e){401===e.response.status?t.loginMsg():Object(c["Toast"])(e.response.data.message)}))}else Object(o["a"])(e).then((function(){Object(c["Toast"])({message:"添加成功",duration:500}),t.closeVariant()})).catch((function(e){401===e.response.status?t.loginMsg():Object(c["Toast"])(e.response.data.message)}))},loginMsg:function(){var t=this;Object(c["MessageBox"])({title:"提示",message:"请登录后加入购物车",confirmButtonText:"现在登录",showCancelButton:!0,cancelButtonText:"再逛逛"}).then((function(e){"cancel"===e?t.closeVariant():t.$router.push({name:"Login",query:{from:t.$route.name,type:"id",query:t.$route.query.id}})}))}}},u=d,l=(i("5e41"),i("fb9f"),i("2877")),p=Object(l["a"])(u,n,s,!1,null,"4e207c0c",null);e["default"]=p.exports},"857a":function(t,e,i){var n=i("1d80"),s=/"/g;t.exports=function(t,e,i,a){var o=String(n(t)),c="<"+e;return""!==i&&(c+=" "+i+'="'+String(a).replace(s,"&quot;")+'"'),c+">"+o+"</"+e+">"}},9911:function(t,e,i){"use strict";var n=i("23e7"),s=i("857a"),a=i("af03");n({target:"String",proto:!0,forced:a("link")},{link:function(t){return s(this,"a","href",t)}})},af03:function(t,e,i){var n=i("d039");t.exports=function(t){return n((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}))}},bb58:function(t,e,i){},c9de:function(t,e,i){},d995:function(t,e,i){},fb9f:function(t,e,i){"use strict";var n=i("bb58"),s=i.n(n);s.a},fc1c:function(t,e,i){}}]);