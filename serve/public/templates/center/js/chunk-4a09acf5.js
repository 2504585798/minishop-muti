(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4a09acf5"],{"685c":function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"a",(function(){return s}));var n=a("b775");function i(t){return Object(n["a"])({url:"image",method:"get",params:t})}function s(t){return Object(n["a"])({url:"image/"+t,method:"delete"})}},"7cdc":function(t,e,a){"use strict";var n=a("f1c9"),i=a.n(n);i.a},"8ed0":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"image-button"},[a("el-upload",{staticClass:"avatar-uploader upload-btn",attrs:{headers:{Authorization:"Bearer "+t.$store.getters.token},action:"http://test.tvbeu.info/api/admin/image",name:"file","before-upload":t.beforeUpload,"show-file-list":!1,"on-success":t.successUpload}},[a("el-button",{attrs:{type:"primary",size:"small"}},[t._v("新增图片")])],1)],1),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{"min-height":"500px","background-color":"#fff",padding:"10px","border-radius":"5px"}},[t._l(t.images,(function(e,n){return a("div",{key:n,staticClass:"image-list-item",staticStyle:{position:"relative"},on:{mouseenter:function(e){t.activeIndex=n},mouseleave:function(e){t.activeIndex=null}}},[a("div",{staticClass:"image-edit-button",class:{"is-active":t.activeIndex===n}},[a("span",{staticStyle:{width:"20px","padding-right":"5px","text-align":"right",cursor:"pointer"},on:{click:function(a){return t.imgDelete(e)}}},[a("i",{staticClass:"iconfont iconshanchu1"})])]),a("el-image",{staticClass:"image-content",staticStyle:{width:"180px",height:"180px"},attrs:{src:e.url,fit:"scale-down"}}),a("div",[t._v(t._s(e.name))])],1)})),a("el-pagination",{staticStyle:{"text-align":"center","margin-top":"20px"},attrs:{"current-page":t.query.page,"page-size":t.query.pageSize,total:t.total,layout:"total, prev, pager, next, jumper"},on:{"current-change":t.handleCurrentChange}})],2)])},i=[],s=a("685c"),c={data:function(){return{loading:!1,images:[],query:{page:1,pageSize:15},total:0,activeIndex:null}},created:function(){this.getData()},methods:{getData:function(){var t=this;this.loading=!0,Object(s["b"])(this.query).then((function(e){t.images=e.data.body.data,t.total=e.data.body.page.total,t.loading=!1})).catch((function(){t.loading=!1}))},handleCurrentChange:function(t){this.query.page=t,this.getData()},beforeUpload:function(t){var e="image/jpeg"===t.type,a=t.size/1024/1024<2;return e||this.$message.error("上传图片只能是 JPG 格式!"),a||this.$message.error("上传图片大小不能超过 2MB!"),e&&a},successUpload:function(){this.$message.success("上传成功"),this.getData()},imgDelete:function(t){var e=this;this.$confirm("是否确认删除？","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then((function(){Object(s["a"])(t.id).then((function(){e.$message.success("已成功删除"),e.getData()})).catch((function(){}))})).catch((function(){}))}}},o=c,r=(a("7cdc"),a("2877")),u=Object(r["a"])(o,n,i,!1,null,"1a4475a8",null);e["default"]=u.exports},f1c9:function(t,e,a){}}]);